## Cos’è il mining di bitcoin?
Non è necessario comprendere come funziona il mining di Bitcoin per utilizzare Bitcoin, ma se sei interessato a carpirne i dettagli, cosa fanno i miner e come i bitcoin vengono creati, continua a leggere.

### Il mining in parole semplici
Immagina di voler riempire un museo con opere d’arte fatte di tessere di un puzzle, dove ogni tassello contribuisce all’esperienza del visitatore. Ci sono regole chiare: solamente quei puzzle assemblati correttamente a seguito della vincita di una competizione possono essere collocati all’interno del museo. Selezioni e ricompensi il bambino che per primo completa il puzzle più complicato. Non vuoi che vinca un bambino che reca danno agli altri barando o sapendo in anticipo la soluzione. Ora immagina di inviare a 10,000 bambini tutto attorno al mondo il medesimo puzzle, e loro iniziano ad assemblarlo tessera per tessera, allo stesso momento. Il bambino che per primo lo completa vince il premio. La prova del completamento del puzzle dimostra che è stato impiegato del lavoro.

Il processo di assemblaggio del puzzle non può essere corrompibile, le tessere del puzzle sbagliate non possono essere inserite e il bambino che vince non può essere selezionato artificialmente. Il bambino più veloce vince il premio. Queste sono le regole. Le regole possono essere cambiate solamente qualora i genitori, i bambini stessi, chi ha progettato il puzzle e il museo – tutti partecipanti nella rete del puzzle – decidono collettivamente di farlo. In questo esempio, quando discutiamo di premio, stiamo metaforicamente parlando della creazione dei bitcoin.

Questo è in parole semplici la proof-of-work. Migliaia di computer nel mondo che contemporaneamente risolvono problemi matematici, dimostrando che un certo ammontare di sforzo computazionale ed energetico è stato speso e, allo stesso momento, decentralizzando il guadagno del premio cosicché nessuno possa colludere o predire quale tra i miner sarà colui il quale potrà aggiungere un blocco alla catena. Lo sforzo dei miner di validare le transazioni e formare blocchi non solo prova il loro lavoro, ma mette anche in sicurezza la blockchain. Non è possibile cambiare il passato – le transazioni storiche – della blockchain di Bitcoin senza un’ingente spesa economica in infrastrutture e consumo energetico al fine di riscrivere la blockchain. Questo è il motivo per cui gli attacchi alla rete di Bitcoin sono teoricamente possibili, ma nella realtà dei fatti sono estremamente dispendiosi.

### Il mining nel dettaglio

Immagina di essere un utente di Bitcoin e che hai già un wallet installato nel tuo smartphone. Ordini un prodotto online, selezionando bitcoin come metodo di pagamento. Il sito ti farà visionare il proprio indirizzo Bitcoin, e tu userai il tuo wallet per l’invio dell’ammontare richiesto. Questo è ciò che accade:

Il tuo wallet firma la transazione. Viene in seguito trasmessa e diffusa nella rete di bitcoin ed entra a far parte della _mempool_, una raccolta di varie transazioni non confermate. Il beneficiario del pagamento riceve la tua transazione, e il suo nodo pieno la convalida. Resta comunque in attesa della conferma che la transazione venga aggiunta con successo all’interno di un blocco prima che venga finalizzata. Questo è il momento in cui potrai vedere che la tua transazione è stata inviata nel tuo wallet me è in sospeso, ovvero che non è ancora stata riconciliata nella blockchain. A questo punto, hai ancora zero conferme.

Contemporaneamente, i miner ricevono la tua transazione nel loro nodo mempool. Un miner di Bitcoin è un dispositivo specializzato denominato ASIC. Il suo unico compito è di eseguire un algoritmo di _hashing_ e risolvere il puzzle di mining il più velocemente possibile. Vi sono centinaia di migliaia di miner decentralmente localizzati ovunque nel mondo.

I miner inoltre eseguono il software e hanno un nodo pieno che convalida la tua transazione, controllando che tutte le regole del protocollo siano ottemperate e che tu, in qualità di mittente, possieda bitcoin a sufficienza per saldare la transazione. Se la risposta a questo controllo è positiva, loro aggiungeranno la transazione nel loro modello di blocco. Ma prima di tutto, quando genereranno un nuovo modello di blocco, i miner inseriranno quella che viene denominata transazione coinbase la quale li premierà di 6.25 bitcoin qualora vincessero la competizione di mining. A seguito dell’inserimento della transazione coinbase, i computer selezionano le transazioni nella mempool e li aggiungeranno all’interno del modello di blocco generato precedentemente.

Allo stesso momento, i dispositivi che eseguono l’algoritmo di hashing (ASIC), iniziano a risolvere il puzzle matematico. Competono con tutti gli altri dispositivi a livello globale. Colui il quale risolverà per primo il puzzle trasmetterà il blocco agli altri nodi, i quali lo verificheranno e a loro volta lo diffonderanno agli altri peer finché ogni nodo della rete avrà validato e aggiunto tale blocco. Solamente a seguito dell’aggiunta di 99 ulteriori blocchi, il miner vincitore sarà in grado di spendere il premio di 6.25 bitcoin vinto precedentemente.

Il nodo pieno del beneficiario del pagamento riceve il blocco e lo convalida nuovamente, confermando finalmente la transazione. Il tuo pagamento è ora connesso alla catena in un blocco di dati ed è formalmente completato. Riceverai un messaggio di conferma nel tuo wallet Bitcoin che il pagamento ha raggiunto il destinatario. Nel tuo wallet vedrai che la tua transazione avrà 1 conferma. Ogni 10 minuti circa, un nuovo blocco viene creato ed aggiunto a seguito del blocco contenente la tua transazione. Dopo sei blocchi, la transazione è considerata praticamente irreversibile.

L’arco di tempo necessaria alla riconciliazione della tua transazione dipende dalla _fee_ – un costo di commissione - che hai selezionato e saldato. Più la fee è alta, più velocemente i miner inseriranno la tua transazione in un blocco, poiché loro trarranno un guadagno da tale fee in aggiunta al premio di 6.25 bitcoin.

Perché questo puzzle matematico? Il protocollo proof-of-work è ad alta intensità di risorse in quanto i computer richiedono un ammontare di potenza rilevante. Ciò attrae critiche verso Bitcoin in considerazione dei cambiamenti climatici che noi umani abbiamo causato nelle recenti decadi. Il capitolo 3.1.11 “L’impronta ecologica di Bitcoin” affronta questo tema in maggior dettaglio.

Perché dobbiamo consumare così tanta elettricità? La risposta risiede in messa in sicurezza e decentralizzazione. Il bisogno di impegnare sforzo ed energia nel mining è volto alla protezione della manipolazione dei dati nella blockchain affinché ne conservi la propria immutabilità e incensurabilità. Nessun stato o organizzazione può modificare la blockchain.

Sin dalla sua creazione nel 2009, la blockchain di Bitcoin non è mai stata compromessa. Circa 18.74 milioni di bitcoin sono stati generati, e il valore attuale è di oltre seicento miliardi di dollari americani (a giugno 2021). Se è vero che un attacco condotto con successo alla rete di Bitcoin sarebbe preoccupante e sgretolerebbe la fiducia, ciò richiederebbe che almeno il 51% della potenza computazionale dei miner sia concentrata nelle mani di un singolo individuo o conglomerato. Potrebbe consentire ad una malevola terza parte di generare nuovi blocchi più velocemente dell’altro 49% rappresentato dalla parte rimanente dei miner, e ciò significa che potrebbe teoricamente oltrepassare il consenso. Ma tale attacco non può sottrarre, reindirizzare o spendere bitcoin senza firme. Gli aggressori potrebbero solamente tentare un _double-spend_ del proprio bitcoin nel blocco più recente, causando un _denial-of-service_ nella creazione di blocchi futuri. 

In aggiunta, se un attacco perpetrato verso Bitcoin avrà mai successo, dunque la blockchain di Bitcoin potrà dividersi come peraltro già accaduto numerose volte in precedenza. I partecipanti nella blockchain di Bitcoin possono optare di approvare il supporto alla ‘nuova’ catena o continuare a sostenere la ‘vecchia’ versione della catena. Questa scissione di versioni causata da regole intrinseche è nota come _hard fork_. L’episodio accaduto nel 2017 dell’hard fork tra Bitcoin e Bitcoin Cash rivelò che ciò non avrebbe recato danno alla legittimità della blockchain.

La seconda maggiore funzione del mining è di garantire la decentralizzazione. Da un lato per la creazione di moneta indipendentemente da entità centralizzate e avide di potere come le banche centrali, dall’altro per assicurare che nessun miner possa trarre vantaggi a scapito di altri e manipolare la blockchain. La mansione computazionale è complessa e, allo stesso tempo, è una questione di fortuna in quanto è paragonabile ad una lotteria per la quale un computer deve trovare per primo la soluzione vincente. Il risultato è che non è possibile predire chi sarà il computer vincente, il che rende la blockchain impossibile da influenzare. Se non conosci chi sarà il primo a vincere, non la puoi manipolare per guadagnare il premio.

Se stai iniziando a valutare di usare bitcoin, stai certo che la blockchain è messa in sicurezza dal mining e distribuita in modo identico tra migliaia di computer differenti. È molto, molto sicura. Il tuo compito più importante è di auto custodire i tuoi bitcoin e mantenere in sicurezza le tue chiavi private (la tua password).
